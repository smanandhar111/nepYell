<div class="container sm">
  <div class="fx" *ngIf="product$ | async as restaurant"><!---todo: Product$-->

    <div class="rest-info-container" *ngFor="let rest of restaurant">
      <div class="images-container">
        <img class="rest-img" src="../../../assets/img/{{rest.images.outlet.outletOne}}" alt="">
        <img class="rest-img" src="../../../assets/img/{{rest.images.outlet.outletTwo}}" alt="">
        <img class="rest-img" src="../../../assets/img/{{rest.images.outlet.outletThree}}" alt="">
        <img class="rest-img" src="../../../assets/img/{{rest.images.outlet.outletFour}}" alt="">
      </div>
      <div class="rest-details">
        <div class="identity">
          <div class="name-rating-container">
            <span class="name">{{rest.name}}</span>
            <app-rating [restRating]="rest.rating" [src]="'rating'"></app-rating>
          </div>
          <div class="type-price-range-container">
            <div class="type">{{rest.foodType}}</div>
            <app-rating [restRating]="rest.priceRange" [src]="'priceRange'"></app-rating>
          </div>
          <div class="services">
        <span class="service-container" *ngIf="rest.services.creditCards">
          <i class="material-icons">credit_card</i> <span>Credit Accepted</span>
        </span>
            <span class="service-container" *ngIf="rest.services.serveAlcohol">
          <i class="material-icons">local_bar</i> <span>Serves Alcohol / Beer</span>
        </span>
            <span class="service-container" *ngIf="rest.services.selfService">
          <i class="material-icons">emoji_people</i> <span>Self Service</span>
        </span>
          </div>
        </div>
        <app-open-closed [storeHours]="rest.storeHours"
                         [src]="'prodInfo'"></app-open-closed>
        <div class="contact">
          <div class="contact-container">
            <i class="material-icons">home</i>
            <span>{{rest.location.toal | titlecase}}, {{rest.location.area | titlecase}}</span>
          </div>
          <div class="contact-container">
            <i class="material-icons">phone</i>
            <a href="tel:{{rest.phoneNumber}}">{{rest.phoneNumber}}</a>
          </div>
        </div>
      </div>

      <div *ngIf="!getSessionAuth()">
        <button class="review-btn" mat-button (click)="firstLogIn(rest.name, rest.id)">Write a Review</button>
      </div>
      <div class="rating-btn-container" *ngIf="getSessionAuth() && logStatus$ | async as user">
        <button class="review-btn" mat-button
                (click)="openRatingDialog(rest.name, rest.id, user.displayName, user.photoURL)">Write a Review</button>
      </div>
      <app-display-review class="app-display-view" [restName]="rest.name" [restId] ="productId"></app-display-review>
      <!--No Reviews-->
      <div class="" *ngIf="reviews$ | async as reviews"><!--todo: Reviews$-->
        <!---When no user logged in && review is zero-->
        <div class="no-review" *ngIf="!getSessionAuth()">
          <div class="new-user">
            <div class="reviewer-info">
              <i class="circled material-icons">face</i>
              <span class="display-name">Current User</span>
            </div>
            <div class="review-container">
              <textarea placeholder="{{getPlaceHolder(rest.name, reviews.length)}}"
                        cols="35" rows="2" (click)="firstLogIn(rest.name, rest.id)"></textarea>
              <span class="review-x-info">
                <app-rating [restRating]="4" [src]="'rating'"></app-rating>
                <span class="posted-date">{{currentDate}}</span>
              </span>
            </div>
          </div>
        </div>
        <!---When user logged in && review is zero-->
        <div class="no-review logged-in" *ngIf="getSessionAuth()">
          <div class="new-user" *ngIf="logStatus$ | async as user"><!--todo: LogStatus$-->
            <div class="reviewer-info">
              <img class="circle" src="{{user.photoURL}}" alt="">
              <span class="display-name">{{user.displayName}}</span>
            </div>
            <div class="review-container">
              <textarea placeholder="{{getPlaceHolder(rest.name, reviews.length)}}" cols="35" rows="2"
                        (click)="openRatingDialog(rest.name, rest.id, user.displayName, user.photoURL)"></textarea>
              <span class="review-x-info">
                <app-rating [restRating]="4" [src]="'rating'"></app-rating>
                <span class="posted-date">{{currentDate}}</span>
              </span>
            </div>
          </div>
        </div>

        <!--When we hav review-->
      </div>

      <!--Similar Ones-->
      <app-similar-ones [foodType]="rest.foodType"
                        [restName]="rest.name"
                        [priceRange]="rest.priceRange"
                        [toal]="rest.location.toal"
                        [restId]="rest.id"
                        [area]="rest.location.area"></app-similar-ones>
    </div>
  </div>
</div>
